<div align="center">

```
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
  â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•
  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘
  â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
   â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•     â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•
```

**Cuprum (Cu) Â· Unix Â· Rust**

*A hybrid Unix-like operating system written in Rust*  
*Ğ“Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ğ°Ñ Unix-Ğ¿Ğ¾Ğ´Ğ¾Ğ±Ğ½Ğ°Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ° Rust*

---

[![Language](https://img.shields.io/badge/language-Rust-B87333?style=flat-square&logo=rust&logoColor=white)](https://www.rust-lang.org/)
[![Architecture](https://img.shields.io/badge/kernel-Hybrid-8B5E3C?style=flat-square)](#architecture)
[![Platforms](https://img.shields.io/badge/platforms-x86__64%20Â·%20ARM64%20Â·%20RISC--V-B87333?style=flat-square)](#platforms)
[![Status](https://img.shields.io/badge/status-Design%20Phase-D4956A?style=flat-square)](#roadmap)
[![License](https://img.shields.io/badge/license-MIT-8B5E3C?style=flat-square)](LICENSE)
[![AI Assisted](https://img.shields.io/badge/docs-AI%20Assisted-6e40c9?style=flat-square&logo=claude&logoColor=white)](#)

</div>

> [!NOTE]
> **RU** â€” ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°, Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¸ README ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ñ‹ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ¸ Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚Ğ° ([Claude](https://claude.ai) by Anthropic). ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ, Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ²ÑĞµ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸ÑÑŒ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ¾Ğ¼; Ğ˜Ğ˜ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ»ÑÑ ĞºĞ°Ğº Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¸ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸Ğ´ĞµĞ¹.
>
> **EN** â€” The architecture, documentation and README of this project were developed with the assistance of AI ([Claude](https://claude.ai) by Anthropic). The concept, name and all technical decisions were made by a human; AI was used as a tool for formatting and structuring ideas.

---

## Ğ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ Â· About

**RU** â€” CupruxOS â€” ÑÑ‚Ğ¾ Unix-Ğ¿Ğ¾Ğ´Ğ¾Ğ±Ğ½Ğ°Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ñ Ğ³Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ñ‹Ğ¼ ÑĞ´Ñ€Ğ¾Ğ¼, Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ½Ğ°Ñ Ğ½Ğ° Rust Ñ Ğ½ÑƒĞ»Ñ. ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¾Ñ‚ *Cuprum* (Ğ»Ğ°Ñ‚Ğ¸Ğ½ÑĞºĞ¾Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼ĞµĞ´Ğ¸, Cu) Ğ¸ *Unix*. ĞšĞ°Ğº Ğ¼ĞµĞ´ÑŒ â€” Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ½Ğ¸Ğº Ğ¸ Ğ¾ÑĞ½Ğ¾Ğ²Ğ° ÑĞ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ¸ĞºĞ¸ â€” CupruxOS ÑÑ‚Ñ€ĞµĞ¼Ğ¸Ñ‚ÑÑ Ğ±Ñ‹Ñ‚ÑŒ Ğ½Ğ°Ğ´Ñ‘Ğ¶Ğ½Ñ‹Ğ¼ Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ½Ğ¸ĞºĞ¾Ğ¼ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¶ĞµĞ»ĞµĞ·Ğ¾Ğ¼ Ğ¸ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ°Ğ¼Ğ¸.

**EN** â€” CupruxOS is a Unix-like operating system with a hybrid kernel, written in Rust from scratch. The name comes from *Cuprum* (Latin for copper, Cu) and *Unix*. Just as copper is a conductor and the foundation of electronics â€” CupruxOS aims to be a reliable conductor between hardware and software.

---

## Ğ¤Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ñ Â· Philosophy

| | RU | EN |
|---|---|---|
| ğŸ›¡ï¸ | **Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ** Ñ‡ĞµÑ€ĞµĞ· Rust Ğ¸ Capability | **Safety** through Rust and Capabilities |
| âš¡ | **ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¼** â€” Ğ¼Ğ°Ğ»Ğ¾ ĞºĞ¾Ğ´Ğ° Ğ² ÑĞ´Ñ€Ğµ | **Minimalism** â€” minimal kernel code |
| ğŸ”’ | **Ğ˜Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ** â€” Ğ²ÑÑ‘ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· IPC | **Isolation** â€” all communication via IPC |
| ğŸŒ | **ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ** Ñ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ´Ğ½Ñ | **Portability** from day one |

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Â· Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Userspace                        â”‚
â”‚                                                     â”‚
â”‚  [App]    [App]    [App]    [App]    [App]          â”‚
â”‚    â”‚        â”‚        â”‚        â”‚        â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚            â”‚
â”‚                   â”‚ IPC                â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚            â”‚
â”‚  â”‚  VFS Server    â”‚  Driver Mgr   â”‚   â”‚            â”‚
â”‚  â”‚  (userspace)   â”‚  (userspace)  â”‚   â”‚ Network    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ Stack      â”‚
â”‚                   â”‚ IPC               â”‚            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              K E R N E L              â”‚            â”‚
â”‚                                       â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Sched   â”‚  â”‚   IPC    â”‚  â”‚  Capability     â”‚  â”‚
â”‚  â”‚  (MLFQ)  â”‚  â”‚  + Ports â”‚  â”‚  System         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           Memory Management                  â”‚  â”‚
â”‚  â”‚   PMM (Buddy)  Â·  VMM  Â·  Heap (Slab)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     HAL â€” Hardware Abstraction Layer         â”‚  â”‚
â”‚  â”‚   x86_64      Â·    ARM64    Â·   RISC-V       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Bootloader                        â”‚
â”‚              Limine Protocol                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ¢Ğ¸Ğ¿ ÑĞ´Ñ€Ğ° Â· Kernel Type

**RU** â€” Ğ“Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ğ¾Ğµ ÑĞ´Ñ€Ğ¾ (ĞºĞ°Ğº macOS XNU): Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ñ‹ Ğ¸ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ğ² ÑĞ´Ñ€Ğµ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸, Ñ‡Ğ°ÑÑ‚ÑŒ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² (VFS, ÑĞµÑ‚ÑŒ) â€” Ğ² userspace Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ğ¸.

**EN** â€” Hybrid kernel (like macOS XNU): drivers and scheduler run in kernel for performance, some services (VFS, network) run in userspace for isolation.

---

## ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Â· Key Components

### ğŸ”— IPC + Capability System

**RU** â€” Ğ’ÑÑ ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°Ğ¼Ğ¸ ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑÑ Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ğ°Ñ… (Mach-style) Ğ¸ capability (seL4-style). Capability â€” ÑÑ‚Ğ¾ unforgeable Ñ‚Ğ¾ĞºĞµĞ½, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ´Ğ°Ñ‘Ñ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¾ Ğ½Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ñ€ĞµÑÑƒÑ€ÑÑƒ.

**EN** â€” All inter-process communication is built on ports (Mach-style) and capabilities (seL4-style). A Capability is an unforgeable token that grants the right to access a resource.

```rust
enum CapKind {
    Port(PortId),              // Ğ¿Ñ€Ğ°Ğ²Ğ¾ Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ/Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚ Â· port read/write
    Memory(PhysAddr, usize),   // Ğ¿Ñ€Ğ°Ğ²Ğ¾ Ğ¼Ğ°Ğ¿Ğ¿Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½ Â· map memory region  
    Task(TaskId),              // Ğ¿Ñ€Ğ°Ğ²Ğ¾ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡ĞµĞ¹ Â· control task
}

bitflags! {
    struct Rights: u32 {
        const READ  = 0b001;
        const WRITE = 0b010;
        const GRANT = 0b100;   // Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‚ÑŒ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼Ñƒ Â· transfer to another
    }
}
```

**ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Â· Data Transfer:**
- ĞœĞ°Ğ»Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ `< 4KB` â†’ ĞºĞ¾Ğ¿Ğ¸Ñ inline Ğ² ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¸ Â· copied inline in message
- Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ `â‰¥ 4KB` â†’ Shared Memory Ñ‡ĞµÑ€ĞµĞ· MemoryCap (zero-copy)

---

### âš™ï¸ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Â· Scheduler

**RU** â€” MLFQ (Multilevel Feedback Queue) Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´ IPC. ĞŸÑ€Ğ¾Ğ±ÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ IPC Ğ²ÑĞµĞ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ½Ğ°Ğ¸Ğ²Ñ‹ÑÑˆĞ¸Ğ¹ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚.

**EN** â€” MLFQ (Multilevel Feedback Queue) adapted for IPC. IPC wake-ups always get the highest priority.

```
Queue 0  [ 1ms  ] â† IPC wake-ups         (highest)
Queue 1  [ 5ms  ] â† interactive tasks
Queue 2  [ 20ms ] â† normal tasks
Queue 3  [ 100ms] â† background tasks     (lowest)
```

```rust
enum TaskState {
    Running,
    Ready,
    Blocked(BlockReason),
    Dead,
}

enum BlockReason {
    WaitingForMessage(PortId),
    WaitingForReply(PortId),
    Sleeping(u64),             // Ğ½Ğ°Ğ½Ğ¾ÑĞµĞºÑƒĞ½Ğ´Ñ‹ Â· nanoseconds
}
```

---

### ğŸ§  Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒÑ Â· Memory Management

| Ğ¡Ğ»Ğ¾Ğ¹ Â· Layer | ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Â· Algorithm | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Â· Purpose |
|---|---|---|
| **PMM** | Buddy Allocator | Ğ¤Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Â· Physical pages |
| **VMM** | Page Tables (HAL) | Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ°Ğ´Ñ€. Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ° Â· Virtual address spaces |
| **Kernel Heap** | Slab Allocator | `Box<T>`, `Vec<T>` Ğ² ÑĞ´Ñ€Ğµ Â· in kernel |

**RU** â€” Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ²Ñ‹Ğ´ĞµĞ»ÑÑÑ‚ÑÑ Ğ»ĞµĞ½Ğ¸Ğ²Ğ¾ â€” Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°Ğ»Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ¾Ğ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğ¸ (page fault).

**EN** â€” Pages are allocated lazily â€” physical allocation happens only on first access (page fault).

---

### ğŸ’¾ Ğ¤Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Â· Filesystem â€” CuprumFS

**RU** â€” Ğ“Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ: Inode + Extent Tree. Ğ’Ğ¼ĞµÑÑ‚Ğ¾ ÑĞ¿Ğ¸ÑĞºĞ° Ğ±Ğ»Ğ¾ĞºĞ¾Ğ² Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ½ĞµĞ¿Ñ€ĞµÑ€Ñ‹Ğ²Ğ½Ñ‹Ğµ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ñ‹ `(start, length)`.

**EN** â€” Hybrid model: Inode + Extent Tree. Instead of a block list, contiguous regions `(start, length)` are stored.

```
Inode
  â””â”€â”€ Extent Tree
        â”œâ”€â”€ Extent(start: 1000, len: 48)
        â”œâ”€â”€ Extent(start: 2048, len: 16)
        â””â”€â”€ Extent(start: 5000, len: 128)
```

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ Â· Features:**
- âœ… Journaling (Write-Ahead Log)
- âœ… HTree Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¹ Â· for large directories
- âœ… Checksum Ğ²ĞµĞ·Ğ´Ğµ Â· everywhere
- âœ… Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ñ ext2 Â· ext2 compatibility
- âœ… FAT32 Ğ´Ğ»Ñ Ñ„Ğ»ĞµÑˆĞµĞº Ğ¸ UEFI Â· for USB and UEFI

---

### ğŸ“ Syscall Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Â· Syscall Interface

**RU** â€” Ğ’ÑĞµĞ³Ğ¾ ~15 ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ñ… Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ² (Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ² 300+ Ğ² Linux). Ğ’ÑÑ‘ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ â€” Ñ‡ĞµÑ€ĞµĞ· IPC Ğº userspace ÑĞµÑ€Ğ²ĞµÑ€Ğ°Ğ¼.

**EN** â€” Only ~15 system calls (vs 300+ in Linux). Everything else goes through IPC to userspace servers.

| Syscall | Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° Â· Group | RU | EN |
|---|---|---|---|
| `ipc_call(cap, msg)` | IPC | Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² | Sync call |
| `ipc_send(cap, msg)` | IPC | ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° | Async send |
| `ipc_recv(cap)` | IPC | Ğ–Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ | Wait for message |
| `cap_create_port()` | Capability | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚ | Create port |
| `cap_grant(cap, task)` | Capability | ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‚ÑŒ capability | Transfer cap |
| `mem_map(cap, addr)` | Memory | Ğ—Ğ°Ğ¼Ğ°Ğ¿Ğ¿Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½ | Map region |
| `mem_alloc(size)` | Memory | Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ | Alloc memory |
| `task_spawn(bin, caps)` | Task | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ | Spawn task |
| `task_exit(code)` | Task | Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒÑÑ | Exit |
| `time_now()` | Time | Ğ’Ñ€ĞµĞ¼Ñ Ğ² Ğ½Ñ | Time in ns |

---

## ĞŸĞ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Â· Platforms

| ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Â· Architecture | Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ñ‡Ğ¸Ğº Â· Bootloader | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Â· Status |
|---|---|---|
| `x86_64` | Limine (UEFI/BIOS) | ğŸŸ¡ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Â· Planned |
| `aarch64` | Limine (UEFI) | ğŸŸ¡ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Â· Planned |
| `riscv64` | Limine (UEFI) | ğŸŸ¡ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Â· Planned |

---

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Â· Project Structure

```
cupruxos/
â”œâ”€â”€ bootloader/              # Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ñ‡Ğ¸Ğº Â· Bootloader
â”‚   â”œâ”€â”€ x86_64/
â”‚   â”œâ”€â”€ aarch64/
â”‚   â””â”€â”€ riscv64/
â”œâ”€â”€ kernel/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ arch/            # HAL â€” Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ Â· arch-specific code
â”‚       â”‚   â”œâ”€â”€ x86_64/
â”‚       â”‚   â”œâ”€â”€ aarch64/
â”‚       â”‚   â””â”€â”€ riscv64/
â”‚       â”œâ”€â”€ mm/              # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒÑ Â· Memory management
â”‚       â”‚   â”œâ”€â”€ pmm.rs       # Physical Memory Manager (Buddy)
â”‚       â”‚   â”œâ”€â”€ vmm.rs       # Virtual Memory Manager
â”‚       â”‚   â””â”€â”€ heap.rs      # Kernel Heap (Slab)
â”‚       â”œâ”€â”€ sched/           # ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Â· Scheduler (MLFQ)
â”‚       â”œâ”€â”€ ipc/             # IPC + Capability System
â”‚       â”œâ”€â”€ vfs/             # Virtual Filesystem interface
â”‚       â”œâ”€â”€ drivers/         # Kernel-space drivers
â”‚       â””â”€â”€ syscall/         # Syscall handler (~15 calls)
â”œâ”€â”€ userland/                # Userspace ÑĞµÑ€Ğ²ĞµÑ€Ñ‹ Â· Servers
â”‚   â”œâ”€â”€ init/               # ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ Â· First process
â”‚   â”œâ”€â”€ vfs_server/         # Ğ¤Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Â· Filesystem
â”‚   â””â”€â”€ driver_manager/     # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ğ°Ğ¼Ğ¸ Â· Driver management
â”œâ”€â”€ libcuprum/               # Userspace Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° Â· Library
â””â”€â”€ fs/
    â””â”€â”€ cuprumfs/           # CuprumFS tools
```

---

## Ğ”Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Â· Roadmap

- [ ] **Ğ­Ñ‚Ğ°Ğ¿ 1** â€” Bootloader (Limine, Ğ²ÑĞµ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Â· all platforms)
- [ ] **Ğ­Ñ‚Ğ°Ğ¿ 2** â€” ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ´Ñ€Ğ¾ Â· Minimal kernel (GDT/IDT, paging, UART)
- [ ] **Ğ­Ñ‚Ğ°Ğ¿ 3** â€” PMM + VMM (Buddy allocator, virtual address spaces)
- [ ] **Ğ­Ñ‚Ğ°Ğ¿ 4** â€” Kernel Heap (Slab allocator, `Box<T>` / `Vec<T>`)
- [ ] **Ğ­Ñ‚Ğ°Ğ¿ 5** â€” ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Â· Scheduler (MLFQ, context switch, SMP)
- [ ] **Ğ­Ñ‚Ğ°Ğ¿ 6** â€” IPC + Capability (ports, messages, rights)
- [ ] **Ğ­Ñ‚Ğ°Ğ¿ 7** â€” Syscall interface (~15 calls) + `libcuprum`
- [ ] **Ğ­Ñ‚Ğ°Ğ¿ 8** â€” Init + VFS server (first userspace process)
- [ ] **Ğ­Ñ‚Ğ°Ğ¿ 9** â€” CuprumFS (native filesystem)
- [ ] **Ğ­Ñ‚Ğ°Ğ¿ 10** â€” ext2 + FAT32 compatibility

---

## Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ Â· Tech Stack

| | |
|---|---|
| **Ğ¯Ğ·Ñ‹Ğº Â· Language** | Rust (`no_std`) |
| **Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ñ‡Ğ¸Ğº Â· Bootloader** | [Limine Protocol](https://github.com/limine-bootloader/limine) |
| **ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ´Ñ€Ğ° Â· Kernel** | Hybrid (Monolith perf + Microkernel isolation) |
| **IPC Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Â· IPC model** | Mach-style ports + seL4-style capabilities |
| **ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Â· Scheduler** | MLFQ + IPC-aware preemption |
| **ĞĞ»Ğ»Ğ¾ĞºĞ°Ñ‚Ğ¾Ñ€ Â· Allocator** | Buddy (PMM) + Slab (Heap) |
| **Ğ¤Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Â· FS** | CuprumFS (Inode + Extents + WAL) |

---

## Ğ’Ğ´Ğ¾Ñ…Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ Â· Inspiration

- **[XNU](https://github.com/apple-oss-distributions/xnu)** â€” Ğ³Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Â· hybrid architecture
- **[seL4](https://sel4.systems/)** â€” capability ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Â· capability system  
- **[Mach](https://en.wikipedia.org/wiki/Mach_(kernel))** â€” IPC Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ² Â· port IPC model
- **[Redox OS](https://www.redox-os.org/)** â€” Rust OS inspiration
- **[OSDev Wiki](https://wiki.osdev.org/)** â€” Ğ½ĞµĞ·Ğ°Ğ¼ĞµĞ½Ğ¸Ğ¼Ñ‹Ğ¹ Ñ€ĞµÑÑƒÑ€Ñ Â· invaluable resource

---

<div align="center">

**CupruxOS** â€” *Cuprum (Cu) + Unix*

Built with ğŸ¦€ Rust Â· Designed for safety, minimalism, and portability  
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ Ğ½Ğ° Rust Â· Ğ¡Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ´Ğ»Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸, Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¼Ğ° Ğ¸ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

</div>
